<% layout('layout', { title: "Correias do Equipamento", active: "equipamentos" }) %>

<h1 class="page-title">
    <i class="fa-solid fa-gears"></i> Correias — <%= equipamento.nome %>
</h1>

<div class="card">

    <p><strong>ID:</strong> <%= equipamento.id %></p>
    <p><strong>Código:</strong> <%= equipamento.codigo %></p>

</div>

<h2 class="section-title">Registrar Consumo</h2>

<form method="POST" action="/equipamentos/<%= equipamento.id %>/correias" class="form-card">

    <label>Correia</label>
    <select name="correia_id" required>
        <option value="">Selecione</option>
        <% listaCorreias.forEach(c => { %>
            <option value="<%= c.id %>"><%= c.nome %> — <%= c.modelo %></option>
        <% }) %>
    </select>

    <label>Quantidade</label>
    <input type="number" min="1" name="quantidade" required>

    <button class="btn-primary">Registrar</button>
</form>

<h2 class="section-title">
    <i class="fa-solid fa-boxes-stacked"></i> Histórico de Consumo
</h2>

<div class="card table-card">
    <table class="table-modern">
        <thead>
            <tr>
                <th>Correia</th>
                <th>Qtd</th>
                <th>Data</th>
            </tr>
        </thead>
        <tbody>
            <% if (historico.length === 0) { %>
                <tr><td colspan="3" class="empty">Nenhum consumo lançado.</td></tr>
            <% } %>

            <% historico.forEach(h => { %>
                <tr>
                    <td><%= h.nome %> — <%= h.modelo %></td>
                    <td><%= h.quantidade %></td>
                    <td><%= h.data %></td>
                </tr>
            <% }) %>
        </tbody>
    </table>
</div>
