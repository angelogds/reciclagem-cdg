<h1 class="page-title">
    <i class="fa-solid fa-clock-rotate-left"></i> Histórico — <%= equipamento.nome %>
</h1>

<!-- CARD DO EQUIPAMENTO -->
<div class="card" style="
    background:white;
    padding:20px;
    border-radius:12px;
    box-shadow:0 2px 6px #00000015;
    margin-bottom:25px;
">
    <div style="display:flex; gap:20px; align-items:center; flex-wrap:wrap;">

        <div style="flex:1;">
            <p><strong>ID:</strong> <%= equipamento.id %></p>
            <p><strong>Código:</strong> <%= equipamento.codigo || "-" %></p>
            <p><strong>Local:</strong> <%= equipamento.local || "-" %></p>
        </div>

        <div style="width:160px; text-align:center;">
            <% if (equipamento.imagem) { %>
                <img src="/<%= equipamento.imagem %>"
                    style="width:140px; height:100px; object-fit:cover; border-radius:8px; border:1px solid #ddd;">
            <% } %>
        </div>

    </div>
</div>

<!-- ORDENS DE SERVIÇO -->
<h2 class="page-title" style="font-size:22px; margin-top:10px;">
    <i class="fa-solid fa-list-check"></i> Ordens de Serviço
</h2>

<div class="card" style="
    background:white;
    padding:20px;
    border-radius:12px;
    box-shadow:0 2px 6px #00000015;
">
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Tipo</th>
                <th>Status</th>
                <th>Abertura</th>
                <th>Fechamento</th>
                <th>Ações</th>
            </tr>
        </thead>

        <tbody>
            <% if (ordens.length === 0) { %>
                <tr>
                    <td colspan="6" style="text-align:center; padding:15px; opacity:0.6;">
                        Nenhuma OS encontrada para este equipamento.
                    </td>
                </tr>
            <% } %>

            <% ordens.forEach(o => { %>
                <tr>
                    <td><%= o.id %></td>
                    <td><%= o.tipo %></td>

                    <td>
                        <% if (o.status === "aberta") { %>
                            <span style="
                                background:#d8f3dc;
                                color:#064e3b;
                                padding:6px 10px;
                                border-radius:6px;
                                font-size:13px;
                                font-weight:600;
                            ">
                                Aberta
                            </span>
                        <% } else { %>
                            <span style="
                                background:#eee;
                                padding:6px 10px;
                                border-radius:6px;
                                font-size:13px;
                                font-weight:600;
                            ">
                                Fechada
                            </span>
                        <% } %>
                    </td>

                    <td><%= o.aberta_em %></td>
                    <td><%= o.fechada_em || "-" %></td>

                    <td class="actions">
                        <a href="/ordens/<%= o.id %>" class="btn-edit">
                            <i class="fa-solid fa-eye"></i> Ver
                        </a>
                    </td>
                </tr>
            <% }) %>
        </tbody>
    </table>
</div>

<!-- CONSUMO DE CORREIAS -->
<h2 class="page-title" style="font-size:22px; margin-top:40px;">
    <i class="fa-solid fa-gears"></i> Consumo de Correias
</h2>

<div class="card" style="
    background:white;
    padding:20px;
    border-radius:12px;
    box-shadow:0 2px 6px #00000015;
">
    <table class="table">
        <thead>
            <tr>
                <th>Correia</th>
                <th>Quantidade</th>
                <th>Data</th>
            </tr>
        </thead>

        <tbody>
            <% if (correias.length === 0) { %>
                <tr>
                    <td colspan="3" style="text-align:center; padding:15px; opacity:0.6;">
                        Nenhum consumo registrado.
                    </td>
                </tr>
            <% } %>

            <% correias.forEach(c => { %>
                <tr>
                    <td><%= c.correia %></td>
                    <td><%= c.quantidade %></td>
                    <td><%= c.data %></td>
                </tr>
            <% }) %>
        </tbody>
    </table>
</div>
