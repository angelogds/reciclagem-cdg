<% layout('layout', { title: "Usuários", active: "users" }) %>

<h1 class="page-title"><i class="fa-solid fa-users"></i> Usuários</h1>

<div class="top-actions">
  <a href="/users/new" class="btn-primary"><i class="fa-solid fa-plus"></i> Novo Usuário</a>
</div>

<div class="card">
  <table class="table-modern">
    <thead><tr><th>ID</th><th>Usuário</th><th>Nome</th><th>Role</th><th style="text-align:center;">Ações</th></tr></thead>
    <tbody>
      <% if (users.length === 0) { %>
        <tr><td colspan="5" class="empty">Nenhum usuário cadastrado.</td></tr>
      <% } %>

      <% users.forEach(u => { %>
        <tr>
          <td><%= u.id %></td>
          <td><%= u.usuario %></td>
          <td><%= u.nome %></td>
          <td><%= u.role %></td>
          <td class="acoes-col" style="justify-content:center;">
            <a href="/users/<%= u.id %>/edit" class="btn-table-edit">Editar</a>

            <form method="POST" action="/users/<%= u.id %>/delete" onsubmit="return confirm('Excluir usuário?');" style="display:inline-block; margin-left:8px;">
              <button class="btn-table-del">Excluir</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
