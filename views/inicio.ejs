<h1 class="page-title">
    <i class="fa-solid fa-chart-line"></i> Dashboard
</h1>

<!-- ==========================
      CARDS RESUMO
=========================== -->
<div class="dashboard-cards">

    <!-- Card Equipamentos -->
    <div class="dash-card">
        <h3><i class="fa-solid fa-truck"></i> Equipamentos</h3>
        <p class="dash-number"><%= totalEquipamentos %></p>
    </div>

    <!-- Card Ordens Abertas -->
    <div class="dash-card">
        <h3><i class="fa-solid fa-list-check"></i> Ordens Abertas</h3>
        <p class="dash-number"><%= ordensAbertas %></p>
    </div>

    <!-- Card Correias -->
    <div class="dash-card">
        <h3><i class="fa-solid fa-gears"></i> Correias em Estoque</h3>
        <p class="dash-number"><%= totalCorreias %></p>
    </div>

</div>

<!-- ESPAÇAMENTO -->
<div style="height: 30px;"></div>

<!-- ==========================
      ÚLTIMAS ORDENS
=========================== -->
<h2 class="section-title">
    <i class="fa-solid fa-clock-rotate-left"></i> Últimas Ordens
</h2>

<div class="card">
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Equipamento</th>
                <th>Status</th>
                <th>Abertura</th>
                <th style="width:100px;"></th>
            </tr>
        </thead>

        <tbody>

            <% if (ultimasOrdens.length === 0) { %>
                <tr>
                    <td colspan="5" class="empty">Nenhuma ordem encontrada.</td>
                </tr>
            <% } else { %>
                <% ultimasOrdens.forEach(o => { %>
                    <tr>
                        <td><%= o.id %></td>
                        <td><%= o.equipamento_nome %></td>
                        <td>
                            <% if (o.status === 'aberta') { %>
                                <span class="tag green">Aberta</span>
                            <% } else { %>
                                <span class="tag">Fechada</span>
                            <% } %>
                        </td>
                        <td><%= o.data_abertura %></td>
                        <td>
                            <a href="/ordens/<%= o.id %>" class="btn-primary btn-sm">
                                Ver
                            </a>
                        </td>
                    </tr>
                <% }) %>
            <% } %>

        </tbody>
    </table>
</div>

<!-- ==========================
    CSS LOCAL DO DASHBOARD
=========================== -->
<style>
    .dashboard-cards {
        display: flex;
        flex-wrap: wrap;
        gap: 25px;
    }

    .dash-card {
        flex: 1;
        min-width: 260px;
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 2px 6px #00000015;
    }

    .dash-card h3 {
        margin: 0 0 10px 0;
        color: #083b1d;
        font-size: 20px;
        font-weight: 600;
    }

    .dash-number {
        font-size: 34px;
        font-weight: bold;
        color: #0d542c;
        margin-top: 5px;
    }
</style>
