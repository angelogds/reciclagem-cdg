<h1 class="page-title">
    <i class="fa-solid fa-truck"></i>
    <%= equipamento ? "Editar Equipamento" : "Novo Equipamento" %>
</h1>

<div class="form-card">

    <!-- ERRO (caso exista) -->
    <% if (error) { %>
        <div class="alert-error"><%= error %></div>
    <% } %>

    <form 
        action="<%= equipamento ? '/equipamentos/' + equipamento.id : '/equipamentos' %>" 
        method="POST" 
        enctype="multipart/form-data"
    >

        <div class="form-grid">

            <!-- Nome -->
            <div>
                <label>Nome do Equipamento</label>
                <input 
                    type="text"
                    name="nome"
                    required
                    value="<%= equipamento ? equipamento.nome : '' %>"
                >
            </div>

            <!-- Código -->
            <div>
                <label>Código</label>
                <input 
                    type="text"
                    name="codigo"
                    required
                    value="<%= equipamento ? equipamento.codigo : '' %>"
                >
            </div>

            <!-- Local -->
            <div>
                <label>Local</label>
                <input 
                    type="text"
                    name="local"
                    value="<%= equipamento ? equipamento.local : '' %>"
                >
            </div>

            <!-- Imagem -->
            <div>
                <label>Imagem (opcional)</label>
                <input type="file" name="imagem" accept="image/*">
            </div>

        </div>

        <!-- Descrição -->
        <div style="margin-top:12px;">
            <label>Descrição</label>
            <textarea 
                name="descricao" 
                rows="4"
            ><%= equipamento ? equipamento.descricao : '' %></textarea>
        </div>

        <!-- Miniatura da imagem -->
        <% if (equipamento && equipamento.imagem) { %>
            <div style="margin-top:14px;">
                <label>Imagem atual:</label><br>
                <img 
                    src="/<%= equipamento.imagem %>" 
                    class="thumb" 
                    style="margin-top:6px;"
                >
            </div>
        <% } %>

        <!-- BOTÃO SALVAR -->
        <button class="btn-primary" style="margin-top:22px;">
            <i class="fa-solid fa-floppy-disk"></i>
            <%= equipamento ? "Salvar Alterações" : "Cadastrar Equipamento" %>
        </button>

    </form>

    <!-- AÇÕES (Voltar / QR / Histórico / Correias) -->
    <% if (equipamento) { %>
        <div class="actions" style="margin-top:28px;">

            <a href="/equipamentos/<%= equipamento.id %>/qrcode" class="btn-qr btn-stack">
                <i class="fa-solid fa-qrcode"></i>
                <span class="btn-label">QR Code</span>
            </a>

            <a href="/equipamentos/<%= equipamento.id %>/historico" class="btn-history btn-stack">
                <i class="fa-solid fa-clock-rotate-left"></i>
                <span class="btn-label">Histórico</span>
            </a>

            <a href="/equipamentos/<%= equipamento.id %>/correias" class="btn-correias btn-stack">
                <i class="fa-solid fa-gears"></i>
                <span class="btn-label">Correias</span>
            </a>

            <a href="/equipamentos" class="btn-edit btn-stack">
                <i class="fa-solid fa-arrow-left"></i>
                <span class="btn-label">Voltar</span>
            </a>

        </div>
    <% } else { %>

        <div class="actions" style="margin-top:28px;">
            <a href="/equipamentos" class="btn-edit btn-stack">
                <i class="fa-solid fa-arrow-left"></i>
                <span class="btn-label">Voltar</span>
            </a>
        </div>

    <% } %>

</div>
